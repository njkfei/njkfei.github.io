title: 性能优化之O2O大法
date: 2016.10.28
categories: 性能优化 #分类
tags: [性能优化，O2O]
toc: true
---

## 什么是性能优化O2O
```
    O2O是互联网的热词，不过，在这里的O2O是指架构设计的O2O，即架构设计之线上到线下。
通过将线上的业务逻辑，转到线下提前计划，将极大的提高线上的响应速度，吞吐量，以及用户体验。
```

## 怎么讲
```
    公司业务刚启动时，业务量相对较小，也比较简单。通过简单地返回数据库当中的内部，即可汇总用户需求。
当业务慢慢增加时，为了省事，可能数据库系统，变成了文件系统，数据库里面，存储的数据，不再是纯的结构化数据了，而是二级，三级结构化数据，字段不再是保持惟一性了。
这样，中间的业务系统在拿到数据库的数据后，需要在CPU和内存中进行搜索，过滤等业务处理。
从而，导致大量无用的数据在网络上传递，占用大量的内存，然后CPU中进行过滤，排重处理，导致系统对外整体性能慢，用户体验差。
```

## 原因
```
用户离数据远，中间环节太多
```

## 怎么办
```
让用户离数据更近
```

## 怎么近

* 线上业务转向线下。O2O.
* 将需要的线上数据提前生成，尽量减少数据在中间停留的时间。
* 线下提前生成线上需要的数据，通过时间窗口控制数据实时性
* 将阻塞同步式的RPC改为异步的MQ处理

## 优点
* 不怕出错，用户离他所需要的数据近，出问题的环节少，性能高
* 用户数据的在系统的流转环节停留时间短，错了也好排查
* 线下服务挂了，也不怕，仅仅影响数据的实时性，大部分功能还是可用的状态

## 总结
```
O2O大法好
```


