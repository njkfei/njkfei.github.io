<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>游骑爬，生命在于折腾</title>
<a class="nav-icon" href="http://weibo.com/1032111474" title="微博" target="_blank">&#61834;</a>
<a class="nav-icon" href="http://user.qzone.qq.com/297206021" title="QQ空间" target="_blank">&#61910;</a>
<a class="nav-icon" href="https://twitter.com/HKEY_C17" title="twitter" target="_blank">&#61593;</a>
<a class="nav-icon" href="https://github.com/njkfei" title="GitHub" target="_blank">&#61595;</a>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学习总结，知识管理">
<meta property="og:type" content="website">
<meta property="og:title" content="游骑爬，生命在于折腾">
<meta property="og:url" content="http://wiki.niejinkun.com/page/5/index.html">
<meta property="og:site_name" content="游骑爬，生命在于折腾">
<meta property="og:description" content="学习总结，知识管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="游骑爬，生命在于折腾">
<meta name="twitter:description" content="学习总结，知识管理">
  
    <link rel="alternative" href="/atom.xml" title="游骑爬，生命在于折腾" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-72124819-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">游骑爬，生命在于折腾</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录点滴</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于我</a>
        
      </nav>
       <nav id="sub-nav">
        <a class="nav-icon-social" href="https://github.com/njkfei" title="GitHub" target="_blank"><img src="/imgs/github-32.png"></a>
        <a class="nav-icon-social" href="http://weibo.com/1032111474" title="微博" target="_blank"><img src="/imgs/weibo-32.png"></a>
        <a class="nav-icon-social" title="Search"><img src="/imgs/search-32.png"></a> 
           
        <a class="nav-icon-social" href="/atom.xml" title="RSS Feed"></a>
        
       </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://wiki.niejinkun.com"></form>
      </div>
    </div>
  </div>

<script>
    
    var d = new Date();
    var m = d.getMinutes();
    var num = Math.ceil((m + 1) / (60 / 6));
    document.getElementById("banner").style.backgroundImage = "url(/css/images/banner" + num + ".jpg)";
    
</script>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-dubbo_spring3实战" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/14/dubbo_spring3实战/" class="article-date">
  <time datetime="2016-03-13T16:00:00.000Z" itemprop="datePublished">2016-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/14/dubbo_spring3实战/">dubbo-spring3实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="u80CC_u666F"><a href="#u80CC_u666F" class="headerlink" title="背景"></a>背景</h2><p>　dubbo 基于spring2.5.6进行构建．目前spring版本已更新到4.0以上了．使用javaconfig的方式，使用起来比xml配置更符合程序员的习惯．<br>因此，有必要研究基于spring3与dubbo进行集成．</p>
<h2 id="u96C6_u6210_u65B9_u6CD5"><a href="#u96C6_u6210_u65B9_u6CD5" class="headerlink" title="集成方法"></a>集成方法</h2><h3 id="u5F15_u5165dubbo_u5E93"><a href="#u5F15_u5165dubbo_u5E93" class="headerlink" title="引入dubbo库"></a>引入dubbo库</h3><p>引用dubbo库时，需要解决dubbo对spring2.5.6的依赖关系．如下所示．<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="title">version</span>&gt;</span>：</span><br><span class="line">	<span class="tag">&lt;<span class="title">exclusions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">exclusion</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">exclusion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果不排除依赖关系，在运行时，将产生jar包冲突，程序无法运行．</p>
<h3 id="u670D_u52A1_u63D0_u4F9B_u8005_u52A0_u5165dubbo_u914D_u7F6E"><a href="#u670D_u52A1_u63D0_u4F9B_u8005_u52A0_u5165dubbo_u914D_u7F6E" class="headerlink" title="服务提供者加入dubbo配置"></a>服务提供者加入dubbo配置</h3><p>需要配置dubbo的注册信息和协议信息<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * ref: http://dubbo.io/User+Guide-zh.htm</span><br><span class="line"> * <span class="doctag">@author</span> sanhao</span><br><span class="line"> *</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="annotation">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DubboBaseConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ApplicationConfig <span class="title">application</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ApplicationConfig application = <span class="keyword">new</span> ApplicationConfig();</span><br><span class="line">		application.setName(<span class="string">"demoService"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> application;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 连接注册中心</span></span><br><span class="line">	<span class="annotation">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> RegistryConfig <span class="title">registry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		RegistryConfig registry = <span class="keyword">new</span> RegistryConfig();</span><br><span class="line">		registry.setProtocol(<span class="string">"zookeeper"</span>);                       <span class="comment">// 也可以是其它注册中心</span></span><br><span class="line">		registry.setAddress(<span class="string">"zookeeper://127.0.0.1:2181"</span>);</span><br><span class="line"><span class="comment">/*		registry.setUsername("aaa");</span><br><span class="line">		registry.setPassword("bbb");*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 不向注册中心注册，在正式上线后，这句话要去掉，建议在properties里面注入异性</span></span><br><span class="line"><span class="comment">/*		问题：</span><br><span class="line">		为方便开发测试，经常会在线下共用一个所有服务可用的注册中心，这时，如果一个正在开发中的服务提供者注册，可能会影响消费者不能正常运行。</span><br><span class="line">		解决方案：</span><br><span class="line">		可以让服务提供者开发方，只订阅服务(开发的服务可能依赖其它服务)，而不注册正在开发的服务，通过直连测试正在开发的服务。*/</span></span><br><span class="line">		registry.setRegister(<span class="keyword">false</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> registry;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="annotation">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;RegistryConfig&gt; <span class="title">registries</span><span class="params">()</span></span>&#123;</span><br><span class="line">		List&lt;RegistryConfig&gt; registries = <span class="keyword">new</span> ArrayList&lt;RegistryConfig&gt;();</span><br><span class="line">		</span><br><span class="line">		registries.add(registry());</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> registries;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 服务提供者协议配置，可以配置多协议</span></span><br><span class="line">	<span class="annotation">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ProtocolConfig <span class="title">protocol</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ProtocolConfig protocol = <span class="keyword">new</span> ProtocolConfig();</span><br><span class="line">	protocol.setName(<span class="string">"dubbo"</span>);</span><br><span class="line">	protocol.setPort(<span class="number">20880</span>);</span><br><span class="line">	protocol.setThreads(<span class="number">200</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> protocol;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="u66B4_u9732_u670D_u52A1"><a href="#u66B4_u9732_u670D_u52A1" class="headerlink" title="暴露服务"></a>暴露服务</h3><p>暴露服务时，需要使用dubbo的基本配置信息，例如，本文中暴露了订单服务．<br><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@Configuration</span></span><br><span class="line"><span class="keyword">@Import</span>(DubboBaseConfig.<span class="keyword">class</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> OrderServiceConfig &#123;</span><br><span class="line">	<span class="keyword">@Autowired</span> </span><br><span class="line">	DubboBaseConfig dubboBaseConfig;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">@Bean</span></span><br><span class="line">	<span class="keyword">public</span> OrderService orderService()&#123;</span><br><span class="line">		OrderService orderService = <span class="keyword">new</span> OrderServiceImpl();</span><br><span class="line">		<span class="keyword">return</span> orderService;</span><br><span class="line">	&#125;</span><br><span class="line">	 </span><br><span class="line">	<span class="comment">// 服务提供者暴露服务配置</span></span><br><span class="line">	<span class="keyword">@Bean</span></span><br><span class="line">	<span class="keyword">public</span> ServiceConfig&lt;OrderService&gt; service()&#123;</span><br><span class="line">	ServiceConfig&lt;OrderService&gt; service = <span class="keyword">new</span> ServiceConfig&lt;OrderService&gt;(); <span class="comment">// 此实例很重，封装了与注册中心的连接，请自行缓存，否则可能造成内存和连接泄漏</span></span><br><span class="line">	service.setApplication(dubboBaseConfig.application());</span><br><span class="line">	service.setRegistry(dubboBaseConfig.registry()); <span class="comment">// 多个注册中心可以用setRegistries(),service.setRegistries(registries());</span></span><br><span class="line">	service.setProtocol(dubboBaseConfig.protocol()); <span class="comment">// 多个协议可以用setProtocols()</span></span><br><span class="line">	</span><br><span class="line">	service.setInterface(OrderService.<span class="keyword">class</span>);</span><br><span class="line">	service.setVersion(<span class="string">"1.0.0"</span>);</span><br><span class="line">	service.setRef(orderService());</span><br><span class="line">	service.setCluster(<span class="string">"failsafe"</span>);  <span class="comment">// 集群配置模式，可以是failover,failfast,failsave,failback等，根据需求场景选择合适的配置</span></span><br><span class="line">	service.<span class="keyword">export</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// service.setGroup("<span class="label">XXX"); //设置分组</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> service;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="u901A_u8FC7web_u670D_u52A1_u8FDB_u884C_u66B4_u9732"><a href="#u901A_u8FC7web_u670D_u52A1_u8FDB_u884C_u66B4_u9732" class="headerlink" title="通过web服务进行暴露"></a>通过web服务进行暴露</h3><p>引入暴露的服务和数据访问服务<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">AppInitializer</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">Class</span>&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">		<span class="comment">// MDC.put("environment", System.getenv("APP_ENV") != null ? System.getenv("APP_ENV") : "dev");</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Class</span>&lt;?&gt;[]&#123;<span class="type">OrderServiceConfig</span>.<span class="keyword">class</span>,<span class="type">MybatisConfiguration</span>.<span class="keyword">class</span>&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">Class</span>&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">String</span>[] getServletMappings() &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="u7F16_u8BD1"><a href="#u7F16_u8BD1" class="headerlink" title="编译"></a>编译</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mvn </span>clean install</span><br></pre></td></tr></table></figure>
<h3 id="u8FD0_u884C"><a href="#u8FD0_u884C" class="headerlink" title="运行"></a>运行</h3><h4 id="u5148_u542F_u52A8zookeeper"><a href="#u5148_u542F_u52A8zookeeper" class="headerlink" title="先启动zookeeper"></a>先启动zookeeper</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sh</span> zkServer.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>
<h4 id="u901A_u8FC7web_u5BB9_u5668_u8FD0_u884C"><a href="#u901A_u8FC7web_u5BB9_u5668_u8FD0_u884C" class="headerlink" title="通过web容器运行"></a>通过web容器运行</h4><p>通过tomcat7插件，进行测试<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn tomcat7:<span class="command">run</span></span><br></pre></td></tr></table></figure></p>
<p>插件pom配置为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">configuration</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">charset</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">port</span>&gt;</span>8888<span class="tag">&lt;/<span class="title">port</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">path</span>&gt;</span>/$&#123;project.build.finalName&#125;<span class="tag">&lt;/<span class="title">path</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="测试"></a>测试</h3><h4 id="u670D_u52A1_u6CE8_u518C"><a href="#u670D_u52A1_u6CE8_u518C" class="headerlink" title="服务注册"></a>服务注册</h4><p>通过zk客户端，看注册是否成功<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> /dubbo</span><br></pre></td></tr></table></figure></p>
<p>看返回信息即可．</p>
<h4 id="u5BA2_u6237_u7AEF_u6D4B_u8BD5"><a href="#u5BA2_u6237_u7AEF_u6D4B_u8BD5" class="headerlink" title="客户端测试"></a>客户端测试</h4><p>客户端测试前，需要编写测户端代码．通过与dubbo服务提供者共享的接口文件，获取dubbo的服务．</p>
<h2 id="u7ED3_u8BBA"><a href="#u7ED3_u8BBA" class="headerlink" title="结论"></a>结论</h2><h3 id="u4F18_u70B9"><a href="#u4F18_u70B9" class="headerlink" title="优点"></a>优点</h3><ul>
<li>dubbo简单</li>
<li>java config 面向程序员，比xml配置清爽</li>
<li>dubbo可以实现服务化</li>
</ul>
<h3 id="u7F3A_u70B9"><a href="#u7F3A_u70B9" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>生成的war包，还是需要部署在tomcat之上，如果能生成内嵌tomcat或jetty容器的话，会更简单</li>
</ul>
<h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><p>示例已上传至github.<br>路径为：</p>
<ul>
<li><a href="https://github.com/njkfei/duboo-provider.git" target="_blank" rel="external">dubbo服务提供者</a></li>
<li><a href="https://github.com/njkfei/dubbo-consumer.git" target="_blank" rel="external">dubbo服务消费者</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/14/dubbo_spring3实战/" data-id="civ3jazss00fho4ux902bgeze" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务化/">服务化</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-micro-service-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/12/micro-service-4/" class="article-date">
  <time datetime="2016-03-11T16:00:00.000Z" itemprop="datePublished">2016-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/12/micro-service-4/">微服务系列4-服务发现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <ul>
<li>微服务简介</li>
<li>构建微服务：使用API网关</li>
<li>构造微服务：微服务架构中的进程间通信</li>
<li>微服务架构的服务发现</li>
<li>面向微服务的事件驱动数据管理</li>
<li>微服务部署选型</li>
</ul>
<h2 id="u4E3A_u4EC0_u4E48_u8981_u4F7F_u7528_u670D_u52A1_u53D1_u73B0"><a href="#u4E3A_u4EC0_u4E48_u8981_u4F7F_u7528_u670D_u52A1_u53D1_u73B0" class="headerlink" title="为什么要使用服务发现"></a>为什么要使用服务发现</h2><p> 想象一下，如果我们通过REST API或者Thrift API.为了构造一个请求，我们需要知道服务实例的网络地址(IP：port)．在传统应用运行在物理设备中，网络地址一般是相对不变的．你的客户端可以通过读取配置文件来确定服务的位置．<br> 但是，现在基于云上构建的微服务应用，服务的地址是经常变化的，因此，通过配置来确定服务位置会遇到困难，如下图所示．<br> <img src="/" alt="pics"><br> 服务实例的地址是动态分配的．另外，服务实例的集合会因为动态的自动伸缩，故障，升级而变化．因此，客户端代码需要使用一种更优雅的服务发现机制．<br> 这里有两种服务发现机制：</p>
<ul>
<li>客户端侧服务发现模式<ul>
<li>服务端侧服务发现模式</li>
</ul>
</li>
</ul>
<h2 id="u5BA2_u6237_u7AEF_u4FA7_u670D_u52A1_u53D1_u73B0_u6A21_u5F0F"><a href="#u5BA2_u6237_u7AEF_u4FA7_u670D_u52A1_u53D1_u73B0_u6A21_u5F0F" class="headerlink" title="客户端侧服务发现模式"></a>客户端侧服务发现模式</h2><p>当使用客户端侧服务发现机制，客户端负责确定可用服务实例的位置，并且在客户端内部完成可用服务实例的负载均衡．客户端通过查询<strong>服务注册中心</strong>(存储可用服务实例的数据库)，获取可以服务实例，然后　客户端使用负载均衡算法，从中选择一个服务实例，再向服务实例发送请求．<br>如下图所示：<br><img src="/" alt="pics"></p>
<p>服务实例启动时，将向注册中心注册．当服务实例终止运行时，将在注册中心注销．服务实例通过心跳机制来周期性刷新注册信息．<br>客户端服务发现模式有很多优点和缺点．</p>
<h3 id="u4F18_u70B9"><a href="#u4F18_u70B9" class="headerlink" title="优点"></a>优点</h3><ul>
<li>简单</li>
<li>可通过一致性hash来实现负载均衡</li>
</ul>
<h3 id="u7F3A_u70B9"><a href="#u7F3A_u70B9" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>客户端与注册中心没有解藕．</li>
<li>如果存在多语言客户端，每种语言都要实现服务发现逻辑．</li>
</ul>
<h2 id="u670D_u52A1_u7AEF_u4FA7_u670D_u52A1_u53D1_u73B0_u6A21_u5F0F"><a href="#u670D_u52A1_u7AEF_u4FA7_u670D_u52A1_u53D1_u73B0_u6A21_u5F0F" class="headerlink" title="服务端侧服务发现模式"></a>服务端侧服务发现模式</h2><p>服务端服务注册中心如下图所示．<br><img src="/" alt="pics"><br>客户端通过负载均衡设备发送请求给服务．负载均衡设备查询注册中心，然后将请求路由给基本可用的一个服务实例．</p>
<h3 id="u65B9_u6848"><a href="#u65B9_u6848" class="headerlink" title="方案"></a>方案</h3><ul>
<li>AWS ELB</li>
<li>NGINX PLUX</li>
<li>Consul</li>
<li>DNS<h3 id="u4F18_u70B9-1"><a href="#u4F18_u70B9-1" class="headerlink" title="优点"></a>优点</h3></li>
<li>当然是客户端和注册中心解藕了．</li>
</ul>
<h3 id="u7F3A_u70B9-1"><a href="#u7F3A_u70B9-1" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>需要负载均衡设备,这个需要高可用哦．</li>
</ul>
<h2 id="u670D_u52A1_u6CE8_u518C"><a href="#u670D_u52A1_u6CE8_u518C" class="headerlink" title="服务注册"></a>服务注册</h2><p>服务注册是服务发现的核心部分．它是一个数据库，用于存储服务实例的网络位置．服务注册中心必须是高可用的．客户端可以从服务注册中心获取服务位置并进行缓存．</p>
<h2 id="u670D_u52A1_u6CE8_u518C_u9009_u9879"><a href="#u670D_u52A1_u6CE8_u518C_u9009_u9879" class="headerlink" title="服务注册选项"></a>服务注册选项</h2><h3 id="u81EA_u6CE8_u518C_u6A21_u5F0F"><a href="#u81EA_u6CE8_u518C_u6A21_u5F0F" class="headerlink" title="自注册模式"></a>自注册模式</h3><h3 id="u7B2C_u4E09_u65B9_u6CE8_u518C_u6A21_u5F0F"><a href="#u7B2C_u4E09_u65B9_u6CE8_u518C_u6A21_u5F0F" class="headerlink" title="第三方注册模式"></a>第三方注册模式</h3><h2 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h2>
      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/12/micro-service-4/" data-id="civ3jazmq00bgo4ux0j6lyz2f" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-micro-service-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/12/micro-service-3/" class="article-date">
  <time datetime="2016-03-11T16:00:00.000Z" itemprop="datePublished">2016-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/12/micro-service-3/">微服务系列3-进程间通信</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <ul>
<li>微服务简介</li>
<li>构建微服务：使用API网关</li>
<li>构造微服务：微服务架构中的进程间通信</li>
<li>微服务架构的服务发现</li>
<li>面向微服务的事件驱动数据管理</li>
<li>微服务部署选型</li>
</ul>
<h2 id="u5F15_u8A00"><a href="#u5F15_u8A00" class="headerlink" title="引言"></a>引言</h2><p>  在单体应用中，组件之间调用另外一个组件的功能是通过语言级别的方法或函数调用完成．然后，基于微服务的应用，分布式系统运行在不同的机器之上．每个服务实例一般是一个进程．因此，服务之间通过进程间通信IPC的机器进行通信．<br>  如下图所示．<br>  <img src="/" alt="pics"></p>
<p>  后面我们将讨论进行间通信技术，在此之前，我们先看一个设计方面的议题．</p>
<h2 id="u4EA4_u4E92_u98CE_u683C"><a href="#u4EA4_u4E92_u98CE_u683C" class="headerlink" title="交互风格"></a>交互风格</h2><p> 当我们在服务之间选择进程间通信机制相互访问时，先看看服务之间是如何交互的．<br> 在服务之间客户端与服务器有多种风格的交互方式．它们可以被规纳为2个维度．<br> 第一个维度通过交互是1对1还是1对多进行划分.</p>
<ul>
<li>1对1 每个客户端的请求被一个服务实例所处理</li>
<li>1对多 每个请求被多个服务实例所处理.<br>第二个维度是根据是否是同步还是异步来划分.</li>
<li>同步 - 客户端期待在确定的时间内获得来自服务端的响应.在等待的过程中,客户端将会阻塞住.</li>
<li><p>异步 -客户端不会阻塞等待服务端的响应.</p>
<p>如下所示.</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">一对一</th>
<th style="text-align:right">一对多</th>
</tr>
</thead>
<tbody>
<tr>
<td>同步</td>
<td style="text-align:center">请求/响应</td>
<td style="text-align:right">-</td>
</tr>
<tr>
<td>异步</td>
<td style="text-align:center">通知 请求/异步响应</td>
<td style="text-align:right">发布/订阅 发布/异步响应</td>
</tr>
</tbody>
</table>
<h3 id="u4E00_u5BF9_u4E00_u4EA4_u4E92"><a href="#u4E00_u5BF9_u4E00_u4EA4_u4E92" class="headerlink" title="一对一交互"></a>一对一交互</h3><p>一对一交互有下面３种风格：</p>
<ul>
<li>请求/响应: 客户端发送请求，等待响应．客户端在期望的时间窗口内阻塞等待响应．在基于线程的应用中，线程将产生请求，并阻塞等待响应．</li>
<li>通知（一次请求）：客户端发送请求给服务．但不服务方进行响应．</li>
<li>请求/异步响应:客户端发送请求给服务，但是响应是异步的．此时客户端不会进行阻塞．</li>
</ul>
<h3 id="u4E00_u5BF9_u591A_u4EA4_u4E92"><a href="#u4E00_u5BF9_u591A_u4EA4_u4E92" class="headerlink" title="一对多交互"></a>一对多交互</h3><p>一对多交互有如下类型：</p>
<ul>
<li>发布/订阅：客户端发布一个通知消息．这个通知消息可以被０或者多个订阅服务所消费．</li>
<li>发布/异步响应：客户端发布一个请求消息，然后在一定时间范围内等待多个服务在响应．<br>　通知每个服务会使用上述交互风格中的一个或多个．对于一些服务,一个IPC机制就足够了．但是另一引动服务可能需要使用多种IPC机制．下图展示了打车应用中乘客请求打车中的交互．</li>
</ul>
<p><img src="/" alt="pics"></p>
<p>上述服务包含了通知，请求/响应，发布/订阅等交互方式．例如，乘客通过手机发送一个<strong>通知</strong>给旅行管理服务请求打车，旅行管理服务将通过<strong>请求/响应</strong>的方式调用乘客管理服务验证乘客的身份，然后旅行管理服务创建<strong>行程单</strong>，再通过<strong>发布/订阅</strong>的方式发送给调度服务，调度服务再选择中可用的司机给乘客．</p>
<p>看完了交互风格，咱们再看一下如何定义API.</p>
<h2 id="API_u5B9A_u4E49"><a href="#API_u5B9A_u4E49" class="headerlink" title="API定义"></a>API定义</h2><p>服务API是连接服务和客户端之间的纽带．不管你采用何种IPC机制．你必须通过某种接口定义语言IDL精确的定义服务的API.<br>服务定义，API先行．你首先开始定义服务接口，然后与客户端工程师进行评审．服务定义完成后，再开始进行服务实现的迭代开发．<br>提供进行API设计，将加速构建服务的过程，并且容易满足客户端的需求．<br>在后文将提到，API的定义，依赖于你所采用的IPC机制．</p>
<ul>
<li>如果采用消息机制，那么API应包括消息通道和消息类型．</li>
<li>如果采用HTTP协议，那么API应包括URL和请求与响应的参数．</li>
</ul>
<h2 id="API_u6F14_u5316"><a href="#API_u6F14_u5316" class="headerlink" title="API演化"></a>API演化</h2><p>随着时间的推移，API将不可避免的变化，在单体应用中，当API变化时，一般可以通过修改更新函数调用处代码完成．但是，微服务应用相对比较困难．你不能强制所有客户端进行升级来适应你的服务．因此，你应该增加部署新版本的服务使得新版本服务可以同步运行．这里很重点一点就是你必须要有一个策略来处理此类问题．<br>如此处理API的变化问题，如果一些变化很小，那么应向后兼容以前的版本．例如，增加请求的属性参数或响应参数．<br>你应该坚持客户端与服务端之间保持<strong>鲁棒原则</strong>．如果客户端使用老的API也能在新服务下正常工作．服务端提供默认值给缺失参数的客户请求．并且客户端忽略响应中的多余数据．</p>
<p>然而，有时候，你必须做为重点且不兼容的API变化，因为你不能强制客户端立即升级．服务端必须在一段时间内支持老的版本．如果你采用基于HTTP机制如REST请求，一个方法不是在请求URL中加上版本号．每个服务实例可以同时处理多个版本．另外一种可选的方案是，你可以部署不同的实体来处理不同的版本．</p>
<h2 id="u5904_u7406_u5C40_u90E8_u5931_u6548"><a href="#u5904_u7406_u5C40_u90E8_u5931_u6548" class="headerlink" title="处理局部失效"></a>处理局部失效</h2><p>由于客户端和服务端是独立且隔离的进程，出于服务宕机或者服务升级的原因，．服务可能没有各客户端请求回复响应．或者由于负载加大，导致服务响应时间延长．<br>比如说，在产品详情页的场景中，我们想象一下，如果推荐服务不可用，一个原生的客户端可能阻塞等待响应．</p>
<p>处理局部失败的方法：</p>
<ul>
<li>网络超时：等待响应时，不进行阻塞，而是通过超时机制保持资源不被占用．</li>
<li>限制外部请求的数量：对于特定的服务，限制外部请求的数量．当超过请求上限时，服务立即向客户端回复不可用．</li>
<li>断路器模式：通过根踪统计请求的正确和错误响应的数据，如果错误数超过了配置的上限，那么断路器，使得后续的请求立即失效．如果大量的请求失效．就建议使服务不可用，这样发送给请求将变得无效．当客户端请求成功后，再重新关闭断路器．</li>
<li>采用回退机制：当请求失败时，提供回退的逻辑．例如，返回缓存的数据．或者提供默认值．比如，返回一个固定的推荐信息(热门商品也行啊)．</li>
</ul>
<h2 id="IPC_u6280_u672F"><a href="#IPC_u6280_u672F" class="headerlink" title="IPC技术"></a>IPC技术</h2><p>　对于IPC,这里有很多不同的IPC技术可以供选择．选择列表如下：</p>
<ul>
<li>同步通信．如Thrift或REST</li>
<li>异步通信：基于消息机制的AMQP或STOMP.<br>对于通信的内容，也有不同的格式．从易于理解的可读性的JSON或XML,到使用二进制协议(通常意味着高效)如Protocal Buffer或Avro．</li>
</ul>
<h3 id="u57FA_u4E8E_u6D88_u606F_u7684_u5F02_u6B65_u901A_u4FE1"><a href="#u57FA_u4E8E_u6D88_u606F_u7684_u5F02_u6B65_u901A_u4FE1" class="headerlink" title="基于消息的异步通信"></a>基于消息的异步通信</h3><p>当使用异步消息时进行异步信息交换时，客户端通过消息将请求发送给服务，如果服务准备好了回复，将发送一条另外的消息给客户端．因为通信是异步的，客户端不需要阻塞等待响应．<br>消息由消息头(如发送方的元数据)和消息体组成．消息通过<strong>通道</strong>进行传输．消息生产者可以发送消息给通道．消息消费者可以从通道中接收消息．<br>这里有两种类型的通道：</p>
<ul>
<li>点对点</li>
<li>发布－订阅<br>点对点通道传输的消息，仅可以被一个消费者从通道中读取．使用点对点通道的服务是前面所述的一对一交互模式．<br>发布－订阅通道可以将消息发送给所以关注消费者的服务．使用发布订阅通道的服务是前面所述的一对多交互模式．<br>下面的图示展示了打车应用　中使用的发布订阅通道．<br><img src="/" alt="pics"></li>
</ul>
<p>当一个行程单创建时，旅行服务发布一个行程消息到通道中．调度服务订阅从通道中获取消息，然后找出合适的司机，然后将派单信息发送到通道之中．这时候，订阅了派单信息的消息推送服务中通道中取出消息，再发送给司机和乘客．</p>
<h4 id="u6D88_u606F_u9009_u578B_uFF1A"><a href="#u6D88_u606F_u9009_u578B_uFF1A" class="headerlink" title="消息选型："></a>消息选型：</h4><p>消息系统有很多种，你最好选择支持多种语言的消息系统．<br>一些消息系统支持标准协议，如AMQP或STOMP.<br>一些消息系统是私有协议，但已经文档化，有很多开源消息系统如RabbitMQ,Apache Kafka,Apache ActiveMQ和NSQ.<br>在高级别上，这些消息系统支持各种消息和通道．它们都朝着可靠，高性能，可伸缩方向发展．</p>
<h4 id="u4F7F_u7528_u6D88_u606F_u7684_u4F18_u70B9"><a href="#u4F7F_u7528_u6D88_u606F_u7684_u4F18_u70B9" class="headerlink" title="使用消息的优点"></a>使用消息的优点</h4><ul>
<li>客户端与服务端解藕　：　客户端发送消息给相应的通道即可，不需要关心服务实例的位置．不需要使用发现机制确定服务实例的位置．</li>
<li>消息缓冲　：在请求/响应式协议(如HTTP)中，客户端和服务端在交换信息期间必须同时在线．相反，消息代码缓冲消息，直到消息被消费者所处理．举个例子，在线商城应用中，当订单被创建时，如果订单处理系统不可用，订单信息可以缓存起来，当订单处理系统恢复后，可以继续完成处理．</li>
<li>客户端－服务端柔性交互：</li>
</ul>
<h4 id="u6D88_u606F_u7CFB_u7EDF_u7684_u7F3A_u70B9"><a href="#u6D88_u606F_u7CFB_u7EDF_u7684_u7F3A_u70B9" class="headerlink" title="消息系统的缺点"></a>消息系统的缺点</h4><ul>
<li>额外的运维复杂性　：　消息系统是一种系统组件，它需要被安装，配置和运维．而且应保证消息系统的高可用性．否则如果消息系统是单点的话，则存在单点故障，系统的可靠性会产生影响．</li>
<li>相对请求响应方式复杂些．不展开描述</li>
</ul>
<h3 id="u8BF7_u6C42/_u54CD_u5E94_u5F0F_u540C_u6B65IPC"><a href="#u8BF7_u6C42/_u54CD_u5E94_u5F0F_u540C_u6B65IPC" class="headerlink" title="请求/响应式同步IPC"></a>请求/响应式同步IPC</h3><p>当使用请求/响应式同步IPC机制时，客户端发送请求给服务端，服务端处理请求，然后发送响应给客户端．通常大部分客户端，是由线程阻塞来等待响应．也有些客户端通过事件驱动的异步机制来等待响应．这可能是通过<strong>Futures</strong>或<strong>Rx</strong>观察者来封装实现．这里有很多协议可以选择，两种流行的协议是REST和Thrift.</p>
<h4 id="REST"><a href="#REST" class="headerlink" title="REST"></a>REST</h4><p>没必要展开了，很多地方地介绍．</p>
<h4 id="Thrift"><a href="#Thrift" class="headerlink" title="Thrift"></a>Thrift</h4><p>支持多种语言，自动生成代码．over</p>
<h3 id="u6D88_u606F_u7F16_u7801"><a href="#u6D88_u606F_u7F16_u7801" class="headerlink" title="消息编码"></a>消息编码</h3><h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><h4 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h4><h4 id="Protocal_Buffer"><a href="#Protocal_Buffer" class="headerlink" title="Protocal Buffer"></a>Protocal Buffer</h4><p>推荐JSON,如果对性能要求高，则推荐PB.</p>
<h2 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h2><p> 当你采用微服务时，进程间通信不可避免．在设计进程间通信时，需要考虑下面几点：</p>
<ul>
<li>服务间如何交互？</li>
<li>如何设计API？</li>
<li>如何应用API演化？</li>
<li>如何处理失效？</li>
</ul>
<p>这里有两种进程间通信机制，同步请求响应和异步消息机制．在后面的文章中，我们将看看服务发现的问题．</p>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/12/micro-service-3/" data-id="civ3jazmv00bjo4uxepcxeenz" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-how-to-adopt-microservices" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/how-to-adopt-microservices/" class="article-date">
  <time datetime="2016-03-10T16:00:00.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/how-to-adopt-microservices/">如何采用微服务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="1__u5F15_u8A00"><a href="#1__u5F15_u8A00" class="headerlink" title="1　引言"></a>1　引言</h2><p>　微服务已成为构建应用的新标准．基于微服务的软件设计将复杂应用分解为细小，敏捷，独立的组件．从而加速推向市场．<br>　微服务维护简单，利于持续集成．</p>
<h2 id="2__u5FAE_u670D_u52A1"><a href="#2__u5FAE_u670D_u52A1" class="headerlink" title="2　微服务"></a>2　微服务</h2><h3 id="2-1__u4EC0_u4E48_u662F_u5FAE_u670D_u52A1"><a href="#2-1__u4EC0_u4E48_u662F_u5FAE_u670D_u52A1" class="headerlink" title="2.1　什么是微服务"></a>2.1　什么是微服务</h3><h3 id="2-2__u5173_u952E_u4F18_u70B9"><a href="#2-2__u5173_u952E_u4F18_u70B9" class="headerlink" title="2.2　关键优点"></a>2.2　关键优点</h3><h3 id="2-3__u5173_u4E8ESOA_2C_u9762_u5411_u670D_u52A1_u7684_u67B6_u6784"><a href="#2-3__u5173_u4E8ESOA_2C_u9762_u5411_u670D_u52A1_u7684_u67B6_u6784" class="headerlink" title="2.3　关于SOA,面向服务的架构"></a>2.3　关于SOA,面向服务的架构</h3><h3 id="2-4__u5176_u5B83_u89E3_u85D5_u6280_u672F"><a href="#2-4__u5176_u5B83_u89E3_u85D5_u6280_u672F" class="headerlink" title="2.4　其它解藕技术"></a>2.4　其它解藕技术</h3><h3 id="2-5__u6CA1_u6709_u94F6_u5F39"><a href="#2-5__u6CA1_u6709_u94F6_u5F39" class="headerlink" title="2.5　没有银弹"></a>2.5　没有银弹</h3><h3 id="2-6__u5C0F_u7ED3"><a href="#2-6__u5C0F_u7ED3" class="headerlink" title="2.6　小结"></a>2.6　小结</h3><h2 id="3__u96C6_u6210"><a href="#3__u96C6_u6210" class="headerlink" title="3　集成"></a>3　集成</h2><h3 id="3-1__u7406_u60F3_u7684_u96C6_u6210_u6280_u672F"><a href="#3-1__u7406_u60F3_u7684_u96C6_u6210_u6280_u672F" class="headerlink" title="3.1　理想的集成技术"></a>3.1　理想的集成技术</h3><h3 id="3-2__u4E0E_u5BA2_u6237_u5BF9_u63A5"><a href="#3-2__u4E0E_u5BA2_u6237_u5BF9_u63A5" class="headerlink" title="3.2　与客户对接"></a>3.2　与客户对接</h3><h3 id="3-3__u5171_u4EAB_u6570_u636E_u5E93"><a href="#3-3__u5171_u4EAB_u6570_u636E_u5E93" class="headerlink" title="3.3　共享数据库"></a>3.3　共享数据库</h3><h3 id="3-4__u540C_u6B65_VS__u5F02_u6B65"><a href="#3-4__u540C_u6B65_VS__u5F02_u6B65" class="headerlink" title="3.4　同步　VS 异步"></a>3.4　同步　VS 异步</h3><h3 id="3-5__u8FDC_u7A0B_u8FC7_u7A0B_u8C03_u7528RPC"><a href="#3-5__u8FDC_u7A0B_u8FC7_u7A0B_u8C03_u7528RPC" class="headerlink" title="3.5　远程过程调用RPC"></a>3.5　远程过程调用RPC</h3><h3 id="3-6_REST"><a href="#3-6_REST" class="headerlink" title="3.6　REST"></a>3.6　REST</h3><h3 id="3-7__u57FA_u4E8E_u4E8B_u4EF6_u534F_u4F5C_u5B9E_u73B0_u5F02_u6B65"><a href="#3-7__u57FA_u4E8E_u4E8B_u4EF6_u534F_u4F5C_u5B9E_u73B0_u5F02_u6B65" class="headerlink" title="3.7　基于事件协作实现异步"></a>3.7　基于事件协作实现异步</h3><h3 id="3-8__u57FA_u4E8E_u72B6_u6001_u673A_u7684_u670D_u52A1"><a href="#3-8__u57FA_u4E8E_u72B6_u6001_u673A_u7684_u670D_u52A1" class="headerlink" title="3.8　基于状态机的服务"></a>3.8　基于状态机的服务</h3><h3 id="3-9__u53CD_u5E94_u5F0F_u6269_u5C55"><a href="#3-9__u53CD_u5E94_u5F0F_u6269_u5C55" class="headerlink" title="3.9　反应式扩展"></a>3.9　反应式扩展</h3><h3 id="3-10__u5728_u5FAE_u670D_u52A1_u4E16_u754C_u4E2D_u4EE3_u7801_u590D_u7528_u7684_u98CE_u9669"><a href="#3-10__u5728_u5FAE_u670D_u52A1_u4E16_u754C_u4E2D_u4EE3_u7801_u590D_u7528_u7684_u98CE_u9669" class="headerlink" title="3.10　在微服务世界中代码复用的风险"></a>3.10　在微服务世界中代码复用的风险</h3><h3 id="3-11__u901A_u8FC7_u5F15_u7528_u8BBF_u95EE"><a href="#3-11__u901A_u8FC7_u5F15_u7528_u8BBF_u95EE" class="headerlink" title="3.11　通过引用访问"></a>3.11　通过引用访问</h3><h3 id="3-12__u7248_u672C_u5316"><a href="#3-12__u7248_u672C_u5316" class="headerlink" title="3.12　版本化"></a>3.12　版本化</h3><h3 id="3-13__u7528_u6237_u63A5_u53E3"><a href="#3-13__u7528_u6237_u63A5_u53E3" class="headerlink" title="3.13　用户接口"></a>3.13　用户接口</h3><h3 id="3-14__u4E0E_u7B2C_u4E09_u65B9_u8F6F_u4EF6_u96C6_u6210"><a href="#3-14__u4E0E_u7B2C_u4E09_u65B9_u8F6F_u4EF6_u96C6_u6210" class="headerlink" title="3.14　与第三方软件集成"></a>3.14　与第三方软件集成</h3><h3 id="3-15__u5C0F_u7ED3"><a href="#3-15__u5C0F_u7ED3" class="headerlink" title="3.15　小结"></a>3.15　小结</h3><h2 id="4__u4F38_u7F29_u5FAE_u670D_u52A1"><a href="#4__u4F38_u7F29_u5FAE_u670D_u52A1" class="headerlink" title="4　伸缩微服务"></a>4　伸缩微服务</h2><h3 id="4-1__u968F_u65F6_u4F1A_u5931_u6548"><a href="#4-1__u968F_u65F6_u4F1A_u5931_u6548" class="headerlink" title="4.1　随时会失效"></a>4.1　随时会失效</h3><h3 id="4-2__u529F_u80FD_u964D_u7EA7"><a href="#4-2__u529F_u80FD_u964D_u7EA7" class="headerlink" title="4.2　功能降级"></a>4.2　功能降级</h3><h3 id="4-3__u67B6_u6784_u5B89_u5168_u63AA_u65BD"><a href="#4-3__u67B6_u6784_u5B89_u5168_u63AA_u65BD" class="headerlink" title="4.3　架构安全措施"></a>4.3　架构安全措施</h3><h3 id="4-4__u53CD_u8106_u5F31_u7684_u7EC4_u7EC7"><a href="#4-4__u53CD_u8106_u5F31_u7684_u7EC4_u7EC7" class="headerlink" title="4.4　反脆弱的组织"></a>4.4　反脆弱的组织</h3><h3 id="4-5__u5E42_u7B49_u6027"><a href="#4-5__u5E42_u7B49_u6027" class="headerlink" title="4.5　幂等性"></a>4.5　幂等性</h3><h3 id="4-6__u4F38_u7F29_u5316"><a href="#4-6__u4F38_u7F29_u5316" class="headerlink" title="4.6　伸缩化"></a>4.6　伸缩化</h3><h3 id="4-7__u6570_u636E_u5E93_u4F38_u7F29"><a href="#4-7__u6570_u636E_u5E93_u4F38_u7F29" class="headerlink" title="4.7　数据库伸缩"></a>4.7　数据库伸缩</h3><h3 id="4-8__u7F13_u5B58"><a href="#4-8__u7F13_u5B58" class="headerlink" title="4.8　缓存"></a>4.8　缓存</h3><h3 id="4-9__u5199_u7F13_u5B58_uFF08_u6DD8_u6C70_u7F13_u5B58_uFF09"><a href="#4-9__u5199_u7F13_u5B58_uFF08_u6DD8_u6C70_u7F13_u5B58_uFF09" class="headerlink" title="4.9　写缓存（淘汰缓存）"></a>4.9　写缓存（淘汰缓存）</h3><h3 id="4-10__u81EA_u52A8_u4F38_u7F29"><a href="#4-10__u81EA_u52A8_u4F38_u7F29" class="headerlink" title="4.10　自动伸缩"></a>4.10　自动伸缩</h3><h3 id="4-11_CAP_u7406_u8BBA"><a href="#4-11_CAP_u7406_u8BBA" class="headerlink" title="4.11　CAP理论"></a>4.11　CAP理论</h3><h3 id="4-12__u670D_u52A1_u53D1_u73B0"><a href="#4-12__u670D_u52A1_u53D1_u73B0" class="headerlink" title="4.12　服务发现"></a>4.12　服务发现</h3><h3 id="4-13__u52A8_u6001_u670D_u52A1_u6CE8_u518C"><a href="#4-13__u52A8_u6001_u670D_u52A1_u6CE8_u518C" class="headerlink" title="4.13　动态服务注册"></a>4.13　动态服务注册</h3><h3 id="4-14__u670D_u52A1_u6587_u6863_u5316"><a href="#4-14__u670D_u52A1_u6587_u6863_u5316" class="headerlink" title="4.14　服务文档化"></a>4.14　服务文档化</h3><h3 id="4-15__u81EA_u63CF_u8FF0_u7CFB_u7EDF"><a href="#4-15__u81EA_u63CF_u8FF0_u7CFB_u7EDF" class="headerlink" title="4.15　自描述系统"></a>4.15　自描述系统</h3><h3 id="4-16__u5C0F_u7ED3"><a href="#4-16__u5C0F_u7ED3" class="headerlink" title="4.16　小结"></a>4.16　小结</h3>
      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/11/how-to-adopt-microservices/" data-id="civ3jazr000e3o4uxhrmmgq7l" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-micro-service-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/micro-service-2/" class="article-date">
  <time datetime="2016-03-10T16:00:00.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/micro-service-2/">微服务系列2－API网关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <ul>
<li>微服务简介</li>
<li>构建微服务：使用API网关</li>
<li>构造微服务：微服务架构中的进程间通信</li>
<li>微服务架构的服务发现</li>
<li>面向微服务的事件驱动数据管理</li>
<li>微服务部署选型</li>
<li><h2 id="u5F15_u8A00"><a href="#u5F15_u8A00" class="headerlink" title="引言"></a>引言</h2><p>假设我们正在开发一个原生移动应用购物APP．这可能需要实现产品详情页面，这个用于显示产品信息．</p>
<p>例如，下面的图示显示了亚马逊的产品详情信息．<br><img src="/" alt="pics"><br>图中包括：</p>
</li>
<li>购物车中商品的数量</li>
<li>订单历史</li>
<li>用户浏览</li>
<li>低库存预警</li>
<li>物流服务</li>
<li>推荐服务</li>
<li><p>其它购物选项</p>
<p>  当你使用一个单体应用架构，移动客户端通过一个简单的REST调用(GET: api.comanpy.com/productdetai/productid)去获取数据．其中，负载均衡设备路请请求，将请求分配到N个后端相同的应用实例．应用将查询数据库并返回响应给客户端．</p>
<p>  作为对比，娄我们使用微服务架构时，展现的产品详情页数据是由不同的微服务提供的．这里有潜在的微服务提供数据．例如：</p>
</li>
<li>购物车服务：　购物车中商品的数量</li>
<li>订单服务：　订单历史</li>
<li>类目服务　：　提供基本的产品信息，例如名字，图片和价格</li>
<li>预览服务：　供用户预览</li>
<li>库存服务：　提供低库存预警</li>
<li><p>推荐服务：　提供推荐商品<br>如下图所示：<br><img src="/" alt="pics"></p>
<p>我们需要确定移动客户端如何访问这些服务．看看下面的方案．</p>
</li>
</ul>
<h2 id="u5BA2_u6237_u7AEF-_u5FAE_u670D_u52A1_u76F4_u63A5_u901A_u4FE1"><a href="#u5BA2_u6237_u7AEF-_u5FAE_u670D_u52A1_u76F4_u63A5_u901A_u4FE1" class="headerlink" title="客户端-微服务直接通信"></a>客户端-微服务直接通信</h2><p>　理论上，客户端可以走向向所有微服务直接提出请求．每个微服务使用一个公共的端点(<a href="https://serviceName,api.company.name).这个URL将映射到微服务的负载均衡设备上．为了得到产品详情页面信息，移动客户端将向每个服务发送请求．" target="_blank" rel="external">https://serviceName,api.company.name).这个URL将映射到微服务的负载均衡设备上．为了得到产品详情页面信息，移动客户端将向每个服务发送请求．</a></p>
<p>　但是，这种方案存在挑战和约束．一个问题是客户端和良好定义的API之间存在不匹配的问题．在这里，客户端需要向微服务发送７次请求．如果微服务更多，那多，这里会有更多的请求．例如亚马逊有千种服务用于渲染详情页面．如果通过LAN访问在公网上进行访问，可造成效率低下．另外，如果通过移动网络访问，将变得不切实际．<br>　这种方案使得客户端变得很复杂．</p>
<p>　另外一种方案，就是客户端向微服务发送用户自定义的协议，而不是web友好的方式．例如，使用二进制的Thrift协议．或者使用AMQP消息协议．这些协议对浏览器是不友好的．而且不易绕过防火墙．应用协议应该是类似于HTTP或者WebSocket协议，这种协议可以绕过防火墙的限制．<br>　另外一个缺点是，这种方法不易于微服务的重构．有时，我们需要修改对系统进行服务拆分．例如，我们合并两个服务或者将一个服务划分为两个服务．如果客户端直接连接服务．这种情况将使得重构极其困难．<br>　因为上述的原因，直接连接微服务很少谈论．</p>
<h2 id="u4F7F_u7528API_u7F51_u5173"><a href="#u4F7F_u7528API_u7F51_u5173" class="headerlink" title="使用API网关"></a>使用API网关</h2><p>　通过一个更好的方法是使用我们所熟知的<strong>API网关</strong>.API网关是整个系统服务器中的单一入口．它类似于面向对象中的＂外观＂模式．API网关封装了内部的微服务，并且提供一个API给外部的客户端．它同时可以提供认证，监控，负载均衡，缓存，请求分发和管理，静态响应处理等功能．<br>下图显示了API网关的典型架构图．<br> <img src="/" alt="pics"></p>
<p>API网关完成请求路由，组合和协议转换功能．所有来自于客户端的请求首先通过API网关．然后再路由请求到合适的微服务．<br>API网关经常处理调用多次微服务对结果进行聚合．它可以在web协议如HTTP或WebSocket和非web友好的协议（pb,thrift)之间进行转换．</p>
<p>API网关可以提供一个自定义的API,它暴露给外部移动客户端一个比较粗状的API.例如，想象产品详情页的场景．API网关可以提供一个端口（/productdetail?productid=xxx)给外部移动客户端，向客户端提供关于产品详情的全部数据．在API网关内部，将调用各个微服务，如产品信息，推荐信息，预览信息等，再组全出结果给客户端．</p>
<h2 id="u4F18_u70B9"><a href="#u4F18_u70B9" class="headerlink" title="优点"></a>优点</h2><h2 id="u7F3A_u70B9"><a href="#u7F3A_u70B9" class="headerlink" title="缺点"></a>缺点</h2><h2 id="u5B9E_u73B0API_u7F51_u5173"><a href="#u5B9E_u73B0API_u7F51_u5173" class="headerlink" title="实现API网关"></a>实现API网关</h2><h3 id="u6027_u80FD_u548C_u4F38_u7F29_u6027"><a href="#u6027_u80FD_u548C_u4F38_u7F29_u6027" class="headerlink" title="性能和伸缩性"></a>性能和伸缩性</h3><h3 id="u4F7F_u7528_u53CD_u5E94_u5F0F_u7F16_u7A0B_u6A21_u578B"><a href="#u4F7F_u7528_u53CD_u5E94_u5F0F_u7F16_u7A0B_u6A21_u578B" class="headerlink" title="使用反应式编程模型"></a>使用反应式编程模型</h3><h3 id="u670D_u52A1_u8C03_u7528"><a href="#u670D_u52A1_u8C03_u7528" class="headerlink" title="服务调用"></a>服务调用</h3><h3 id="u670D_u52A1_u53D1_u73B0"><a href="#u670D_u52A1_u53D1_u73B0" class="headerlink" title="服务发现"></a>服务发现</h3><h3 id="u5904_u7406_u5C40_u90E8_u5931_u6548"><a href="#u5904_u7406_u5C40_u90E8_u5931_u6548" class="headerlink" title="处理局部失效"></a>处理局部失效</h3><p>### </p>
<p>## </p>
<h2 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h2>
      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/11/micro-service-2/" data-id="civ3jazn100bmo4ux2dkxhht9" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-api-gateway" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/api-gateway/" class="article-date">
  <time datetime="2016-03-10T16:00:00.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/api-gateway/">服务化－API网关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="1__u80CC_u666F"><a href="#1__u80CC_u666F" class="headerlink" title="1　背景"></a>1　背景</h2><p>　假设你正在使用微服务的模式构建一个在线商城，并且你正在实现产品的详情页面，你需要开发多个版本的产品详情页面用户接口，如下所示．</p>
<ul>
<li>对于桌面应用或移动浏览器，基于HTML5/JS UI提供接口．HTML通过服务端web应用产生．</li>
<li>对于原生android或iPhone APP,通过REST APIR提供接口．<br>　此外，在线商城必须通过REST风格的API向第三方应用提供产品详情页信息．<br>　产品详情UI将展示很多关于产品的信息．例如<a href="/www.z.cn">亚马逊</a>的详情页通过<em>POJOS</em>展示．</li>
<li>书的基本信息，例如书名，作者，价格等</li>
<li>您的购买历史</li>
<li>购买选项</li>
<li>购买这本书的用户经常买的其它书本</li>
<li>购买这本书的用户经常买的其它类目商品</li>
<li>用户浏览商品信息</li>
<li>销售榜单</li>
<li>……<br>  因为使用微服务模式，所以在线商城将分解为多个服务．例如：</li>
<li>产品信息服务：关于产品的基本信息，如标题，作者等</li>
<li>价格服务：产品价格</li>
<li>订单服务：订单购买历史</li>
<li>库存服务: 商品是否于可售</li>
<li>预览服务：客户预览信息<br>　因此，为了显示商品详情信息，你将访问多个服务，最后汇集所需要的产品信息．
　　</li>
</ul>
<h2 id="2__u95EE_u9898_u6765_u4E86"><a href="#2__u95EE_u9898_u6765_u4E86" class="headerlink" title="2　问题来了"></a>2　问题来了</h2><pre><code>客户端如何访问这些服务呢？
</code></pre><h2 id="3__u73B0_u72B6"><a href="#3__u73B0_u72B6" class="headerlink" title="3　现状"></a>3　现状</h2><ul>
<li>微服务提供给客户端的粒度经常是不同的．微服务通常提供细粒度的API.这意味着客户端需要与多个微服务进行交互．如前所述，客户端所需要的产品详情信息，需要从多个服务中进行聚合．</li>
<li>不同的客户端需要不同的数据，例如桌面端需要的数据，比移动端需要的数据，要更多更丰富．</li>
<li>不同类型客户端之间网络性能的差异．例如，移动网络通常与固网相比，速率更低，延时更高．另外，WAN通过比LAN速率要慢，这意味着移动端对网络性能的要求要比服务端web应用更高．服务端web应用可以多次访问服务，而不会影响用户体验，但移动端去并非如此．</li>
<li>服务实例的数量和他们的位置（host:port）会经常变化</li>
<li>拆分服务将是长期的过程，应对客户端透明</li>
</ul>
<h2 id="4__u89E3_u51B3_u65B9_u6848"><a href="#4__u89E3_u51B3_u65B9_u6848" class="headerlink" title="4　解决方案"></a>4　解决方案</h2><p>实现一个针对客户端的单一入口API网关，是解决服务化的必经之路．API网关处理客户端的请求．这些请求可以通过简单的代理或路由到具体的服务．API网关暴露不同的API给客户端，例如netfix api网关运行客户端适配代码，从而给不同的客户端提供合适的服务．</p>
<p>API网关同时提供安全服务，例如，验证客户请求的身份是否合法．</p>
<pre><code>![pics](imgs/arch/service/apigateway/apigateway.jpg)
</code></pre><h2 id="5__u7ED3_u8BBA"><a href="#5__u7ED3_u8BBA" class="headerlink" title="5　结论"></a>5　结论</h2><h3 id="5-1__u4F18_u52BF"><a href="#5-1__u4F18_u52BF" class="headerlink" title="5.1　优势"></a>5.1　优势</h3><p>　使用API网关，将带来如下好处．</p>
<ul>
<li>将客户端与组成应用的众多微服务进行隔离</li>
<li>将客户端与服务实例地址进行隔离</li>
<li>为每种客户端提供最理想的API</li>
<li>减少请求数量．API网关使得客户端仅需要一次访问，就可以从众多的微服务中获取聚合后的数据．提高了用户体验．API网关是移动应用的必经这路．</li>
<li>简化业务逻辑变动和升级<h3 id="5-2__u7F3A_u9677"><a href="#5-2__u7F3A_u9677" class="headerlink" title="5.2　缺陷"></a>5.2　缺陷</h3>  当然，API网关有如下缺陷．</li>
<li>复杂度增加：API网关需要不断开发，升级，部署和管理．</li>
<li>增加响应时间，因为API网关需要多次访问微服务．</li>
<li>如何实现API网关？采用可以伸缩的处理高性能负载的事件驱动/响应式方法是最佳方案．例如，在JVM上，基于NIO库的Netty,Spring Reactor等等．Node.JS是另一种方案．</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/11/api-gateway/" data-id="civ3jaztf00g6o4uxj9o4gbfe" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-micro-service-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/10/micro-service-1/" class="article-date">
  <time datetime="2016-03-09T16:00:00.000Z" itemprop="datePublished">2016-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/10/micro-service-1/">微服务系列1－微服务简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <ul>
<li>构建微服务：使用API网关</li>
<li>构造微服务：微服务架构中的进程间通信</li>
<li>微服务架构的服务发现</li>
<li>面向微服务的事件驱动数据管理</li>
<li>微服务部署选型</li>
<li><h2 id="u5F15_u8A00"><a href="#u5F15_u8A00" class="headerlink" title="引言"></a>引言</h2>　当前，微服务吸引了越来越多的目光,无论是文章，博客，社交媒体，还是学术会议.在各种热词排行榜中，都能看到微服务．</li>
</ul>
<h2 id="u6784_u5EFA_u5355_u4E00_u6574_u4F53_u5E94_u7528"><a href="#u6784_u5EFA_u5355_u4E00_u6574_u4F53_u5E94_u7528" class="headerlink" title="构建单一整体应用"></a>构建单一整体应用</h2><pre><code>假设我们正在开始构建一个类似于UBER的全新的打车应用．在经过前期的预备会议和需求收集后，我们构建好了一个全新的应用．这种应用可以通过spring boot 或者　rails 或者play框架．这个应用的架构如下所示的六方法所示．

![pics](imgs/arch/service/mircroservice/pic1.jpg)
</code></pre><p>图中，在应用的核心位置是业务逻辑．业务逻辑是通过一系列模块组成．这些模块定义了服务，领域对象和事件．围绕着核心功能，是与外部世界的适配器和接口．例如数据库访问组件适配器，用于生产和消费消息的组件．以及暴露API的web组件或UI组件．</p>
<pre><code>除了拥有一个模块架构外，整个应用是做为一个单体应用进行打包和部署的．实际情况依赖于应用所采用的语言和框架．例如：
</code></pre><ul>
<li>JAVA应用将打成一个WAR包．这些WAR包将部署在Tomcat或Jetty等WEB容器上．</li>
<li>内置WEB容器的java包</li>
<li><p>独立目录部署的应用．例如Rails或Node.js应用</p>
<p>  这种设计方式的单体应用非常普遍，它们非常容易开发，因为我们的IDE或者其它工作都聚焦于构建这种单体应用．这些应用同时也很容易测试和．你可以通过<em>Selenium</em>对UI进行端到端的测试．单体应用同时也晚易于部署．你可以复制部署包到其它服务器．你同样可以通过多份复制的方式，通过负载均衡器，进行水平伸缩．<br>  在早期阶段，单体应用运行还是非常好的．</p>
</li>
</ul>
<p>##　走向单体应用恶梦<br>　不幸的是．简单的方法有一个巨大的限制，随着时间的推移，成功的应用一般增长迅速，并且变得越来越大．通过每次前进，你的开发团队实现了越来越多的功能，当然，这也意味着增加了越来越多的代码．<br>    几年之后，你的细小，简单的应用变成了巨大的单体怪物．举个极端的例子，我最近遇到了一个工程师，他写了一个工具，用于分析几千个JAR包．这些jar包由数百万行代码组成．我确定他这些年作出了巨大的努力．</p>
<pre><code>一旦你的应用变大，变得复杂．你的开发团队将陷入痛苦的境地．任何尝试敏捷开发将会是一场无用的折腾．问题主要原因是单体应用变得难以逾越的复杂．对于任何开发人员而言，单体应用因为巨大的复杂性，而无法完全理解．这样的结果是，定位BUG或者正确实现新的功能将变得困难而费时．更严重的是，这将进入一个死循环，如果代码变得难于理解，后续的任何变更将无法保持正确．你将面对一个无法理解的大怪物．

大型单体应用将减慢开发速度，单体应用越大，启动时间越长，例如，最近调查显示一些开发者报告这个应用的启动时间达到了12分钟，我曾经听说启动时间花了40分钟．如果工程师不得不重启应用服务器，那么一天的大部分时间是等等产品启动．

另外一个大问题是，复杂的单体应用，将阻碍持续开发．今天，SAAS应用推动了生产方式的变化．对于复杂的单体应用，修改其中的一部分，然后对其进行重新部署将变得极其困难．而不仅仅是前面提到的启动时间过长．此外，因为变更的影响通常无法易于理解，因此，你需要进行大量的人工测试，来确认变更的正确性．最后的结果是，持续开发将变得几乎不可能．

单体应用还难以协调不同模块之间的资源冲突问题．例如，一个模块是CPU密集的图像处理逻辑，它最理想的部署是EC2优化计算实例．另外一个模块是一个内存数据库，它最适合部署在EC2内存优化实例上．然后，由于这些模块部署在一起，你不得不综合权衡硬件选型．

还没有完，另外一个单体应用的问题是可靠性．由于所以模块运行在同样的处理器上，如果任何一个模块有BUG,例如内存泄漏，可能影响整个处理器的性能．进一步地，因为所有实例是相同的，因此，这个BUG将影响所有的机器．

还有，单体应用使得采用新的框架或新的语言变得困难．例如，让我们想象一下，你有一个2百万行代码它们使用XYZ框架编写．如果你想改用最新的ABC框架重写，这种代价极其昂贵，即使新的框架是被认为是更优的．结果就是，采用新技术将遇到巨大的阻力，你将被采用任何新技术选择所卡住．

总结来看：你将拥有一个成功的关键业务的应用，它会变成巨大的怪物．开发者们知道，它将继续使用落后，淘汰的技术．这使得招聘优秀的工程师变得困难．这种应用将变得难于伸缩又不可靠．最后就是，敏捷开发和发布将变得不可能．

那么，你将怎么办呢？
</code></pre><h2 id="u5FAE_u670D_u52A1_uFF1A_u641E_u5B9A_u590D_u6742_u6027_u95EE_u9898"><a href="#u5FAE_u670D_u52A1_uFF1A_u641E_u5B9A_u590D_u6742_u6027_u95EE_u9898" class="headerlink" title="微服务：搞定复杂性问题"></a>微服务：搞定复杂性问题</h2><p>　很多组织，例如Amazon,eBay和Netflix，已经采用现在称为<strong>微服务架构模式</strong>的方法来解决问题．而不是构建一个巨大的单个怪物－单体应用．这个方法是分解你的应用为一系列更小，内部互相连接的服务．</p>
<pre><code>典型的，服务是一组明显的特征，或者功能的集合．例如订单管理，客户管理等．每个微服务是一个微小的应用．它们也有自己的__六边形架构__，有通过各种适配器组成的业务逻辑．一些微服务通过暴雷API来供其它微服务消费．其它微服务可能实现一Web UI.在运行时，每个实体可能是一个云上的虚拟机，或者是一个DOCKER容器．

例如，解藕后的系统将由下图所示的微服务组成．

![pics](imgs/arch/service/mircroservice/pic2.jpg)


现在，上图中的每个功能区是由自己的微服务实现．例如WEB应用被分解为简单WEB应用的集合(例如打车应用中的乘客和司机)．这种方法对于用户，设备或特定的用例都非常容易．

每个后端服务通过REST API来暴雷服务．并且大部分服务通过API来消费其它服务．然后，这些服务没有通过地址访问的方式来访问后端服务．反而代之的是，服务间内部通信是通过__API网关__来实现．__API网关__是用来处理负载均衡，缓存，访问控制，API测量和监控．这可能通过__NGINX__实现．后面的文章将讨论__API网关__.

我们来看一看下面这张立方体图．

![pics](imgs/arch/service/mircroservice/pic3.jpg)

在这个立方体中，Y轴方向表示将应用进行切分解藉．X轴方向表示通过复制的方式进行水平扩展．Z轴表示对数据进行切分，例如通过主键进行分库分表．
</code></pre><h2 id="u670D_u52A1_u5316_u7684_u4F18_u70B9"><a href="#u670D_u52A1_u5316_u7684_u4F18_u70B9" class="headerlink" title="服务化的优点"></a>服务化的优点</h2><p>　　微服务有很多优点．</p>
<ul>
<li>首先，它用来处理复杂的问题．它可以将复杂的单体应用解藉成一系列服务．并保持整体功能不变．这个应用被分解为可管理的服务．每个服务都有一个良好定义的边界．通过RPC或者消息驱动的API提供服务．微服务架构提供了模块性等级．在实践中通过单体应用它很难达到这种模块性级别．结果就是，单独的微服务可以更快开发，更易理解和维护．</li>
<li>其次，微服务架构模式允许每个服务进行单独的部署，工程师不需要考虑外部的变更部署．这些变更易于测试．例如，UI团队可以执行AB测试和快速迭代．微服务架构模式提供了技术部署的可能性．</li>
<li>第三，微服务架构模式允许每个微服务进行独立的开发．开发团队可以聚焦在特定的服务之上．工程师可以自由的选择他所擅长的技术．当然，大部分组织希望避免过多的技术选项．然后，这种自由度意味着工程师在新项目中可避免使用过时的技术．当启动一个新服务时，他们有选择流行技术的可能性．另外，这些服务相对较小，使得可以容易地通过最新技术进行重写．</li>
<li>最后，微服务架构允许独立的进行伸缩，你可以通过调整实例的数量进行扩容．另外，你可以选择最适合的硬件来匹配微服务．例如，可以给CPU敏感的服务部署在EC2 cpu优化实例上．可以将内存数据库部署在EC2内存优化实体上．</li>
</ul>
<h2 id="u670D_u52A1_u5316_u7684_u7F3A_u70B9"><a href="#u670D_u52A1_u5316_u7684_u7F3A_u70B9" class="headerlink" title="服务化的缺点"></a>服务化的缺点</h2><p>在30年前的”人月神话”就已经提出．世人没有<strong>银弹</strong>．和其它技术一样，微服务架构也是有缺点的．</p>
<ul>
<li><p>首先：</p>
</li>
<li><p>其次,微服务意味着分布式,分布式将带来新的问题.</p>
</li>
<li><p>还有,测试微服务是比较复杂的.例如,通过现代框架例如spring boot,编写一个针对通过REST API单体web应用的测试用例是比较简单的.但测试微服务相对比较复杂.</p>
</li>
<li><p>还有,微服务之间存在依赖性, 这样将给部署带来问题.例如A,B,C服务中,B依赖于C,那么,需要C服务先启动.</p>
</li>
<li>部署微服务也存在困难.</li>
</ul>
<h2 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h2><p> 构建复杂应用本身就有内在的困难,一个单体架构适合在理解上简单,轻量的应用上.将你采用复杂的单体应用时,你将走向痛苦的境地.微服务架构模式是解决复杂的一个更优选择.</p>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/10/micro-service-1/" data-id="civ3jazn400bpo4uxww0u588y" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-spring-boot-mybatis-restmvc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/10/spring-boot-mybatis-restmvc/" class="article-date">
  <time datetime="2016-03-09T16:00:00.000Z" itemprop="datePublished">2016-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/10/spring-boot-mybatis-restmvc/">spring boot mybatis restmvc集成--完全基于注解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>  今天在网上找了一下spring boot mybatis集成，发现baidu的链接里面的demo已经过时，比自己目前做的还落后．因此，自己尝试搭一下环境．<br>个人的感受为：</p>
<ul>
<li>spring boot确实非常爽，比基于java config还轻松，原来以为基于java config配置已经挺爽了，结果spring boot 更进一步解放和生产力．</li>
</ul>
<h3 id="u672C_u793A_u4F8B_u6280_u672F_u8981_u7D20"><a href="#u672C_u793A_u4F8B_u6280_u672F_u8981_u7D20" class="headerlink" title="本示例技术要素"></a>本示例技术要素</h3><ul>
<li>spring boot</li>
<li>tomcat 作为web容器，已被spring boot集成</li>
<li>mybatis 数据库访问框架</li>
<li>java config进行IOC配置</li>
</ul>
<p>特别说明，本demo没有XML配置文件(logback.xml除外)．</p>
<h3 id="u4F7F_u7528_u6B65_u9AA4"><a href="#u4F7F_u7528_u6B65_u9AA4" class="headerlink" title="使用步骤"></a>使用步骤</h3><ul>
<li>导入依赖</li>
<li>创建model</li>
<li>创建mapper DAO</li>
<li>创建控制器</li>
<li>指定入口</li>
<li>启动运行</li>
</ul>
<h3 id="u5BFC_u5165_u4F9D_u8D56"><a href="#u5BFC_u5165_u4F9D_u8D56" class="headerlink" title="导入依赖"></a>导入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">springframework.version</span>&gt;</span>4.2.4.RELEASE<span class="tag">&lt;/<span class="title">springframework.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.3.3.RELEASE<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--支持使用 JDBC 访问数据库 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--添加适用于生产环境的功能，如性能指标和监测等功能。 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- mysql驱动 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>5.1.29<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="u521B_u5EFAmodel"><a href="#u521B_u5EFAmodel" class="headerlink" title="创建model"></a>创建model</h3><pre><code>见model包下面的User.java文件
</code></pre><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> user_id;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> user_type;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUser_id</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> user_id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser_id</span>(<span class="params"><span class="keyword">int</span> user_id</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.user_id = user_id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUser_type</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> user_type;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser_type</span>(<span class="params"><span class="keyword">int</span> user_type</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.user_type = user_type;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u521B_u5EFAmapper_DAO"><a href="#u521B_u5EFAmapper_DAO" class="headerlink" title="创建mapper DAO"></a>创建mapper DAO</h3><pre><code>见dao包下面的UserDAO.java
</code></pre><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">public</span> <span class="tag">interface</span> <span class="tag">UserDAO</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable">@Select</span>(<span class="string">"select * from ysyy_user where user_id=#&#123;user_id&#125; and user_type=#&#123;user_type&#125;"</span>)</span><br><span class="line">	User <span class="function">getUser</span>(<span class="variable">@Param</span>(<span class="string">"user_id"</span>)int user_id,<span class="variable">@Param</span>(<span class="string">"user_type"</span>)int user_type);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u521B_u5EFA_u63A7_u5236_u5668"><a href="#u521B_u5EFA_u63A7_u5236_u5668" class="headerlink" title="创建控制器"></a>创建控制器</h3><pre><code>见controller下面的UsrController.java
</code></pre><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@RestController</span></span><br><span class="line"><span class="annotation">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="annotation">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserDAO userDAO;</span><br><span class="line">	</span><br><span class="line">	<span class="annotation">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">	<span class="annotation">@ResponseBody</span></span><br><span class="line">	<span class="function">User <span class="title">getUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">return</span> userDAO.<span class="title">getUser</span><span class="params">(<span class="number">971</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*	public static void main(String[] args)&#123;</span><br><span class="line">		SpringApplication.run(SampleController.class,args);</span><br><span class="line">	&#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u6307_u5B9A_u5165_u53E3"><a href="#u6307_u5B9A_u5165_u53E3" class="headerlink" title="指定入口"></a>指定入口</h3><pre><code>见App.java
</code></pre><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span><br><span class="line">&#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="typename">void</span> main( String[] args )</span><br><span class="line">    &#123;</span><br><span class="line">    	 SpringApplication.run(App.<span class="keyword">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u542F_u52A8_u8FD0_u884C"><a href="#u542F_u52A8_u8FD0_u884C" class="headerlink" title="启动运行"></a>启动运行</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn clean <span class="operator"><span class="keyword">install</span></span><br><span class="line"><span class="keyword">java</span> -jar spring-boot-mybatis-web</span></span><br></pre></td></tr></table></figure>
<h3 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="测试"></a>测试</h3><p>在浏览器中输入<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">localhost:</span><span class="number">8080</span>/user</span><br></pre></td></tr></table></figure></p>
<h3 id="u8FD4_u56DE_u7ED3_u679C"><a href="#u8FD4_u56DE_u7ED3_u679C" class="headerlink" title="返回结果"></a>返回结果</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"<span class="attribute">user_id</span>":<span class="value"><span class="number">971</span></span>,"<span class="attribute">user_type</span>":<span class="value"><span class="number">2</span></span>&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/10/spring-boot-mybatis-restmvc/" data-id="civ3jazgy006ko4ux6gpdepxk" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springboot/">springboot</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
    <article id="post-水果上市时间" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/04/水果上市时间/" class="article-date">
  <time datetime="2016-03-03T16:00:00.000Z" itemprop="datePublished">2016-03-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/生活/">生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/04/水果上市时间/">各种水果上市时间</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>下面说的是每个月的主打水果，当然根据每年的天气变化，也可能有小的差别，或者有的水果持续的时间长达3个月，有的只有1-2周： </p>
<p>一月——柿子、猕猴桃。如果猕猴桃太硬，把猕猴桃装入塑料袋内，再把切开的梨或苹果同袋混装，然后将袋口密封3～5天，催熟后食用。柿子有去疲劳的作用。 </p>
<p>二月——甘蔗。冬天吃甘蔗，最好将其切成20厘米—30厘米的小段，放入锅里煮十来分钟后捞起趁热削皮吃，比生吃更甜。 </p>
<p>三月——菠萝。切片泡入淡盐水中，放冰柜里冰后食用，会更香甜好吃。 </p>
<p>四月——芒果、山竹。山竹挑选的时候，注意看蒂是绿色的，捏起来外壳比较软的才是新鲜的。打开以后，里面的肉质是纯白色。如果外壳硬得像石头一样，多半是不能吃了。 </p>
<p>五月——草莓、荔枝。5月份上市的荔枝，多是三月红等早熟品种，味道稍带酸味，属中低档品种，6月中旬是荔枝的最好时节，糯米糍、妃子笑、桂味等味甜香浓的优良品种开始上市。 </p>
<p>六月——樱桃。6月中旬至6月30日正常采摘时间。购买时选择果实饱满结实、带有绿梗的樱桃。在3～5度下可以存放5天，常温下最多两天。 </p>
<p>七月——桃子、李子。桃子饱人，李子伤人，所以桃子当饭吃都没关系，但李子可要限量吃。 </p>
<p>八月——西瓜。夏天出汗多，丢失营养也多，适当吃些西瓜，不仅能补足丢失的水分，更能增加营养。西但瓜性凉，感冒者不宜多吃西瓜。 </p>
<p>九月——葡萄。早上市的葡萄除了早熟品种外，一般都是催熟的，略带酸涩味，且含激素量大，对身体不好，建议吃正常上市的葡萄。 </p>
<p>十月——梨子。生津止渴，这时的天气容易感冒，嗓子不好，最长喝的就是煮白梨。 </p>
<p>十一月——苹果。十一月大部分苹果都上市，有些苹果适合新鲜吃，有些存放到冬天味道比较好。 </p>
<p>十二月——桔子。最有名的当然是卢柑了，想吃卢柑最好去经常买水果的店，要不然很容易被小摊贩欺骗的。</p>
<p>5中-6中：樱桃成熟期 露地草莓：5月中下旬开始采摘</p>
<p>5-7月份：杏成熟 </p>
<p>李子：早熟6月上旬，好吃的品种应在8、9月间成熟。</p>
<p>枣：9中下到10上旬</p>
<p>“红星苹果：9月底才熟，“富士”系列到10月份才能上市。</p>
<p>葡萄7，8月吧；4——5月份桃子、菠萝、人心果……</p>
<p>5——6月份菠萝、芒果、人心果……</p>
<p>6——7月份芒果、黄皮、菠萝……</p>
<p>7——8月份蕃荔枝、木瓜、柿子、杨桃……</p>
<p>8——9月份香蕉、大蕉、杨桃、夏威夷木瓜……</p>
<p>蔬菜实在不好找，南方各种蔬菜播种时间参考。</p>
<p>3、花椰菜：9-11月播种</p>
<p>4、大白菜：根据品种不同全年可种，但一般9-10月播种。小白菜、菜心：根据品种不同全年可种。</p>
<p>6、茎用芥菜：秋季播种</p>
<p>7、芹菜：7月上旬-12月</p>
<p>8、菠菜：15-20度为生长适温，秋播为主8-12月均可播</p>
<p>9、蕹菜：也叫通菜，空心菜，最早可在1-2月播种或扦插</p>
<p>10、苋菜：生长适温23-27度，2-10月播种，30-50天收获</p>
<p>11、茼蒿：生长适温20度左右，可春秋两季栽培，但以秋播为主8月下旬-10月播种</p>
<p>12、香菜：生长适温15-20度，可春秋两季栽培，但以秋播为主8月下旬-11月播种</p>
<p>13、薄荷：一年四季</p>
<p>14、蕃茄：以秋栽为主，8月下旬-9月初播种，于11月至翌年3月采收</p>
<p>15、茄子：四季栽培。春茄9-10播种，12月定植，翌年4-6月采收；夏茄2-3播种，4-5月定植，6-8月采收；秋茄3-4播种，4-5月定植，7-11月采收；冬茄8月上旬播种，12月定植，11-12月采收。</p>
<p>16、辣椒：12月至翌年1月育苗,2-3月定植；8月上旬育苗，10月至翌年2月采收</p>
<p>17、黄瓜：一年四季均可，但最适合春季，12-翌年1月直播，2月定植</p>
<p>18、冬瓜：2月底或3月露地直播；秋冬瓜在小暑前播种</p>
<p>19、南瓜：与黄瓜相似</p>
<p>20、丝瓜、苦瓜：2-3月春植；夏植于4-5月播种育苗，秋植7-8月催芽直播</p>
<p>21、生食甜瓜：包括西瓜、网纹瓜、哈密瓜等，生长适温25-32度，2月下旬播种。</p>
<p>22、葫芦：生长适温20-25度，2月播种</p>
<p>23、豌豆、荷兰豆：9月中旬-12月，11月至翌年3月收获，若以采收嫩梢为目的，在8月中下旬播种</p>
<p>24、蚕豆：生长适温14-16度，冬季播种</p>
<p>25、豇豆：春夏秋三季栽培，可在2月下旬至9月上旬播种</p>
<p>26、毛豆：发芽适温15-20度，生长适温20-25度，高于35度或低于14度则易落花落夹，不利于生长发育。根据品种不同播种，最迟可在7-8月播种，9-11采收。</p>
<p>27、四季豆：1-3月春播，9-10月秋播。</p>
<p>28、扁豆：生长适温20-25度，35度以上仍能开花结荚，春播秋收，华南地区可收到翌年3月份。</p>
<p>29、土豆：冬春秋三季栽培，一般用春薯做种，9月下旬至翌年2月上旬分三次播种。</p>
<p>30、芋：</p>
<p>31、姜：2-3月种，7-9收获嫩姜，10月至翌年2月继续收获老姜。</p>
<p>32、大蒜：收蒜头的在9-11播种，收青蒜的在9月至翌年1月播。</p>
<p>32、葱：</p>
<p>33、韭菜：11-12播种，翌年3-4月定植</p>
<p>一月——柿子、猕猴桃   二月——甘蔗。</p>
<p>三月——菠萝。</p>
<p>四月——芒果、山竹。</p>
<p>五月——草莓、荔枝。5月份上市的荔枝，多是三月红等早熟品种，味道稍带酸味，属中低档品种，6月中旬是荔枝的最好时节，糯米糍、妃子笑、桂味等味甜香浓的优良品种开始上市。</p>
<p>六月——樱桃。6月中旬至6月30日正常采摘时间</p>
<p>七月——桃子、李子。</p>
<p>八月——西瓜。</p>
<p>九月——葡萄。</p>
<p>十月——梨子。</p>
<p>十一月——苹果。</p>
<p>十二月——桔子。</p>
<p>苹果:青色的,六月就上市了,熟些的在八月底到九月中;</p>
<p>香蕉:生香蕉六月开采,熟香蕉也要在八月初;</p>
<p>橙子:九月中;</p>
<p>荔枝:五月中到六月中;</p>
<p>哈密瓜:七月;</p>
<p>葡萄:六月中到七月初;</p>
<p>樱桃:四月初(只一个星期);</p>
<p>西瓜:六月中到七月中;</p>
<p>生梨:五月中到六月中;  </p>
<p>常见的春天水果有：草莓　波萝　火龙果 人参果</p>
<p>常见的夏天水果有：李 桃　杏 枣　猕猴桃 柚子　西瓜 香瓜 哈密瓜 白兰瓜　葡萄　提子 芒果　樱桃 橄榄 杨梅　柠檬　柿子　龙眼　荔枝　香蕉　桔子　无花果 枇杷 青梅 西梅</p>
<p>常见的秋季水果：甘蔗</p>
<p>常见的冬天水果有： 苹果 梨　柑橘 橙　木瓜、杨桃、莲雾</p>
<p>1月(冬季)</p>
<p>木瓜 红香蕉 樱桃番茄 杨桃 柑橘橙 青枣 甘果蔗 草莓 番石榴 牛奶蕉 柑桔 观赏南瓜 无花果 鹤首瓜</p>
<p>2月(冬季)</p>
<p>木瓜 红香蕉 樱桃番茄 杨桃 番荔枝 青枣 甘果蔗 草莓 番石榴 牛奶蕉 柑桔 观赏南瓜 鹤首瓜</p>
<p>3月(春季)</p>
<p>枇杷 红香蕉 樱桃番茄 杨桃 番荔枝 青枣 甘果蔗 草莓 番石榴 牛奶蕉 柑桔 观赏南瓜 果桑 鹤首瓜 蛇瓜</p>
<p>4月(春季)</p>
<p>枇杷 红香蕉 樱桃番茄 荔枝 番荔枝 蛇瓜 甘果蔗 果桑 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 澳州坚果 柠檬</p>
<p>5月(春季)</p>
<p>芒果 红香蕉 樱桃番茄 荔枝 番荔枝 蛇瓜 黄皮 果桑 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 李 西瓜 桃 香瓜 柠檬 台湾莲雾澳州坚果 油梨</p>
<p>6月(夏季)</p>
<p>芒果 红香蕉 樱桃番茄 荔枝 番荔枝 蒲瓜 黄皮 果桑 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 李 西瓜 桃 香瓜 柠檬 台湾莲雾澳州坚果 菠萝 火龙果 油梨</p>
<p>7月(夏季)</p>
<p>芒果 红香蕉 樱桃番茄 荔枝 番荔枝 蒲瓜 黄皮 番龙眼 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 李 西瓜 桃 香瓜 柠檬 台湾莲雾澳州坚果 菠萝 火龙果 油梨 龙眼 百香果 菠萝蜜</p>
<p>8月(夏季)</p>
<p>芒果 红香蕉 樱桃番茄 木瓜 番荔枝 蒲瓜 杨桃 番龙眼 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 日本甜柿 西瓜 黑提子 香瓜 柠檬菠萝蜜 澳州坚果 菠萝 火龙果 油梨 龙眼 百香果</p>
<p>9月(秋季)</p>
<p>芒果 红香蕉 鸡蛋果 木瓜 番荔枝 百香果 杨桃 番龙眼 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 日本甜柿 西瓜 黑提子 香瓜 柠檬菠萝蜜 油梨 菠萝 火龙果</p>
<p>10月(秋季)</p>
<p>樱桃番茄 红香蕉 鸡蛋果 木瓜 台湾甜玉米 百香果 杨桃 无花果 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 火龙果 西瓜 黑提子 人心果柠檬 菠萝 油梨</p>
<p>11月(秋季)</p>
<p>樱桃番茄 红香蕉 鸡蛋果 木瓜 台湾甜玉米 百香果 杨桃 无花果 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 火龙果 台湾青枣 黑提子人心果 柠檬 菠萝 油梨</p>
<p>12月(冬季)</p>
<p>樱桃番茄 红香蕉 鸡蛋果 木瓜 草莓 百香果 杨桃 无花果 番石榴 牛奶蕉 鹤首瓜 观赏南瓜 果蔗 台湾青枣 黑提子 人心果柠檬 菠萝 油梨 柑橘橙</p>
<hr>
<ol>
<li><p>樱桃：成熟期在5月中旬到6月中旬；</p>
</li>
<li><p>草莓：在5月中下旬开始采摘，草莓的酸甜味道才浓厚；</p>
</li>
<li><p>杏：成熟期在5月下旬至7月中旬；</p>
</li>
<li><p>桃：从6月中旬到10月初都有成熟的；</p>
</li>
<li><p>李子：早熟品种6月上旬就开始上市，最好吃的品种应在8、9月间成熟;</p>
</li>
<li><p>枣：成熟期在9月中下旬到10月上旬，大枣才有枣味，在此之前上市的枣又柴又木，根本没法吃；</p>
</li>
<li><p>苹果：有些苹果品种入伏后就成熟，即“伏苹果”，中晚期成熟的苹果，如“红星”9月底才熟，“富士”系列到10月份才能上市；</p>
</li>
<li><p>梨：早熟品种8月上旬成熟，如“绿宝石”，但价钱较贵，大多数梨在9月底或10月初上市；</p>
</li>
<li><p>柿子：一般在霜降节气，也就是10月下旬才开始上市；</p>
</li>
<li><p>桔子：分早熟的和晚熟的,一般来说早熟的在8月就可以了,晚熟的话可以晚到11月,不过这也不是绝对的,要看你是在哪个地域,还有就是当年的气候：</p>
</li>
<li><p>芒果：开花至果实成熟时间因气候和品种而异，一般约需110～150天，6～9月间可陆续采收：</p>
</li>
</ol>
<p>柚：严格来讲，柚子成熟于深秋和初冬交接的时间，一般的柚品种的成熟期大多集中在11-12月份，但矮晚柚的成熟期在第二年重-2月，正值春节期间；</p>
<ol>
<li><p>红毛丹：每年2月至4月开花，6月至8月为果实成熟采摘季节；</p>
</li>
<li><p>菠萝蜜：又称木菠萝、树菠萝，海南特产的一种热带桑科常绿乔木。果实6~7月成熟，果实巨大，最重达40公斤，被称为水果之王、热带水果皇后，果实硕大，重者有20至25千克。</p>
</li>
<li><p>香蕉：按其种植时期，大致有三种蕉：春种蕉，每年在”雨水”前后的2至3月份种植，8至9月份抽蕾，11至12月份成熟。秋植蕉，一般于秋分前后的9至10月间种植，次年7月份抽蕾，10月中至11月初成熟。还有夏植蕉，于6至8月份种植，次年7月初抽蕾，9月底至10月份采果。以上是正常情况，若遇异常情况，尤其是遇寒害低温，则会延期成熟；</p>
</li>
<li><p>榴莲：成熟时间在7·8月，榴莲从树上摘下来后，十天就可成熟；</p>
</li>
<li><p>核桃：每年的九月份开始是山核桃的收获季节；</p>
</li>
<li><p>柠檬：成熟季节在冬季；</p>
</li>
<li><p>杨梅：成熟期在5-6月份，南方5-6月份又是多雨季节，所以称为梅雨；</p>
</li>
<li><p>石榴：种后6——8个月即可开花结果，第二年即可四季开花结果，开花期集中于4——5月和8——10月，成熟期集中于7——9月和12——1月；</p>
</li>
<li><p>菠萝：一般热带一年可两次收获菠萝,有冬春菠萝和夏季菠萝之分,冬春菠萝在4、5月份成熟,夏季菠萝在7月份左右才可收收获；</p>
</li>
<li><p>龙眼（桂圆）：桂圆是龙眼干，9月至10月上旬成熟.</p>
</li>
<li><p>水蜜桃:依成熟期早晚分为极早熟、早熟、中熟、晚熟、极晚熟5类。果实发育期（即开花盛期至果实成熟所需天数）在80天以内的为极早熟，80～85天的为早熟，100～120天的为中熟，120～150天的为晚熟，150天以上的为极晚熟。特早熟水蜜桃在5月底、6月上旬成熟。</p>
</li>
<li><p>番荔枝：又称佛头果一年可开花3次，开花至采收需时60～70天，以6月上旬结果最多，5月下旬所结的果最优；</p>
</li>
<li><p>荔枝：成熟季节在5月初至6月底；</p>
</li>
<li><p>葡萄：的正常成熟期是在七八月份，冬天也能吃上葡萄，．．研制了一年两熟的葡萄栽培技术，并开始大面积栽种，预计每次产量可达6万吨；</p>
</li>
<li><p>枇杷：秋冬开花，春末夏初果实成熟；</p>
</li>
<li><p>火龙果：开花结果期为每年的5~11月，从花开到采果约40天时间，当果实由绿色逐渐变为紫红色时即可采收。同时产果期长达6个月，分12至15批成熟。</p>
</li>
</ol>
<p>吃水果时间表</p>
<p>2011-11-07 15:32:36　 出处：pchouse　 作者：叶落无痕　 责任编辑：weiyinfeng (评论0条)<br>　　导读：水果对我们人体有很大的益处，那么究竟怎样安排吃水果的时间，才能取得最好的效果呢?<br>关键词：水果   时间表   </p>
<p>水果含有许多人体需要的营养和保健成分，它对人体的有利作用已被越来越多的人所认识，所以水果已成为许多人每天必吃的食品之一。但是怎么样吃水果才能既保证吸收其的营养成分，又不会对身体造成不良影响呢?<br>　　专家所说的“上午的水果是金，中午到下午3点是银，3点到6点是铜，6点之后的则是铅”。说的就是吃水果的时间。意思就是上午是吃水果的黄金时期，选择上午吃水果，对人体最具功效，更能发挥营养价值，产生有利人体健康(健康食品)的物质。</p>
<p>　　一般而言，早餐前吃水果既开胃又可促进维生素吸收，人的胃肠经过一夜的休息之后，功能尚在激活中，消化功能不强，但身体又需要补充足够的营养素，此时吃易于消化吸收的水果，可以为上午的工作或学习活动提供营养所需。但适合餐前吃的水果最好选择酸性不太强、涩味不太浓的，如苹果(苹果食品)、梨、香蕉、葡萄(葡萄食品)等。胃肠功能不好的人，不宜在这个时段吃水果。</p>
<p>　　上午十点左右，由于经过一段紧张的工作和学习，碳水化合物基本上已消耗殆尽，此时吃个水果，其果糖和葡萄糖可快速被机体吸收，以补充大脑和身体所需的能量(能量食品)，而这一时段也恰好是身体吸收的活跃阶段，水果中大量的维生素和矿物质，对体内的新陈代谢起到非常好的促进作用。</p>
<p>　　如果午饭过后要吃水果，那么就等到两小时之后吧，即可赶在中午饭和下午饭之间的3点到4点之间吃水果。晚饭过后，就不宜多吃水果了。</p>
<p>　　另外，吃水果并非多多益善，适时而食，对身体有益，如果过食或暴食或与季节不符，亦会致病。</p>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/04/水果上市时间/" data-id="civ3jazaj000co4uxo7mc5dgn" class="article-share-link">Share</a> -->
      
      
    </footer>
  </div>
  
</article>

 

  
    <article id="post-android-gradle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/03/android-gradle/" class="article-date">
  <time datetime="2016-03-02T16:00:00.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务/">服务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/03/android-gradle/">android常用依赖项目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="u4F9D_u8D56_u6CE8_u5165"><a href="#u4F9D_u8D56_u6CE8_u5165" class="headerlink" title="依赖注入"></a>依赖注入</h2><p>butterknife</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'com.jakewharton:butterknife:7.0.1'</span></span><br></pre></td></tr></table></figure>
<h2 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h2><p>greendao<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'de.greenrobot:greendao:2.1.0'</span></span><br></pre></td></tr></table></figure></p>
<p>greendao generator<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'de.greenrobot:greendao-generator:2.1.0'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="u56FE_u50CF_u6846_u67B6"><a href="#u56FE_u50CF_u6846_u67B6" class="headerlink" title="图像框架"></a>图像框架</h2><h2 id="u7F51_u7EDC_u6846_u67B6"><a href="#u7F51_u7EDC_u6846_u67B6" class="headerlink" title="网络框架"></a>网络框架</h2><p>volley<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'com.mcxiaoke.volley:library:1.0.19'</span></span><br></pre></td></tr></table></figure></p>
<p>okhttp</p>
<h2 id="u6D88_u606F_u6846_u67B6"><a href="#u6D88_u606F_u6846_u67B6" class="headerlink" title="消息框架"></a>消息框架</h2><p>eventbus<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'org.greenrobot:eventbus:3.0.0'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="u4E8C_u7EF4_u7801_u6846_u67B6"><a href="#u4E8C_u7EF4_u7801_u6846_u67B6" class="headerlink" title="二维码框架"></a>二维码框架</h2><p>zxing</p>
<p>## </p>

      
    </div>
    <footer class="article-footer">
      <div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
    <!-- 分享  <a data-url="http://wiki.niejinkun.com/2016/03/03/android-gradle/" data-id="civ3jazty00ggo4uxyryb7hnk" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>

 

  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">34</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/opencv/">opencv</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/protocal/">protocal</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web前端/">web前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/存储系统/">存储系统</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/性能优化/">性能优化</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/搜索/">搜索</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/有用的资源/">有用的资源</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务/">服务</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构/">架构</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/沟通协作/">沟通协作</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/">编程开发</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计/">设计</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ImageMagick/">ImageMagick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aop/">aop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/audio/">audio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/commons-fileupload/">commons-fileupload</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concunrrent/">concunrrent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crontab/">crontab</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/download/">download</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/">dubbo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ehcache/">ehcache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es/">es</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fileuploads/">fileuploads</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grep/">grep</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/im/">im</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/indexer/">indexer</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ionic/">ionic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/italy/">italy</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">49</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javav/">javav</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbctemplate/">jdbctemplate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jetty/">jetty</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/job/">job</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jta/">jta</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/liux/">liux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/">mail</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/map/">map</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memcached/">memcached</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/">mq</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mqtt/">mqtt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/">mvc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysal/">mysal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mytabis/">mytabis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv/">opencv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pb/">pb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/protolbuf/">protolbuf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/push/">push</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quartz/">quartz</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rome/">rome</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schedule/">schedule</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/search/">search</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session/">session</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sms/">sms</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/solr/">solr</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spirng/">spirng</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-security/">spring security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcache/">springcache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threads/">threads</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/travel/">travel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/video/">video</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yii2/">yii2</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/事务/">事务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式事务/">分布式事务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/协调/">协调</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/定时任务/">定时任务</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能/">性能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能优化，O2O/">性能优化，O2O</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能，架构/">性能，架构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/推荐/">推荐</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/推送/">推送</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/支付/">支付</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/支付宝/">支付宝</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务化/">服务化</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息/">消息</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/短信/">短信</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/队列/">队列</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/ImageMagick/" style="font-size: 10px;">ImageMagick</a> <a href="/tags/android/" style="font-size: 11.82px;">android</a> <a href="/tags/aop/" style="font-size: 10px;">aop</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/audio/" style="font-size: 10px;">audio</a> <a href="/tags/cache/" style="font-size: 10.91px;">cache</a> <a href="/tags/commons-fileupload/" style="font-size: 10px;">commons-fileupload</a> <a href="/tags/concunrrent/" style="font-size: 10px;">concunrrent</a> <a href="/tags/crontab/" style="font-size: 13.64px;">crontab</a> <a href="/tags/download/" style="font-size: 10px;">download</a> <a href="/tags/dubbo/" style="font-size: 10.91px;">dubbo</a> <a href="/tags/ehcache/" style="font-size: 10px;">ehcache</a> <a href="/tags/elasticsearch/" style="font-size: 12.73px;">elasticsearch</a> <a href="/tags/es/" style="font-size: 10px;">es</a> <a href="/tags/fileuploads/" style="font-size: 10.91px;">fileuploads</a> <a href="/tags/git/" style="font-size: 10.91px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/gradle/" style="font-size: 10.91px;">gradle</a> <a href="/tags/grep/" style="font-size: 10px;">grep</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/im/" style="font-size: 10px;">im</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/indexer/" style="font-size: 12.73px;">indexer</a> <a href="/tags/ionic/" style="font-size: 10px;">ionic</a> <a href="/tags/italy/" style="font-size: 11.82px;">italy</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/javav/" style="font-size: 10px;">javav</a> <a href="/tags/jdbctemplate/" style="font-size: 10px;">jdbctemplate</a> <a href="/tags/jetty/" style="font-size: 10px;">jetty</a> <a href="/tags/job/" style="font-size: 14.55px;">job</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/jta/" style="font-size: 10px;">jta</a> <a href="/tags/jvm/" style="font-size: 10px;">jvm</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 18.18px;">linux</a> <a href="/tags/liux/" style="font-size: 10px;">liux</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/map/" style="font-size: 10px;">map</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/memcached/" style="font-size: 10px;">memcached</a> <a href="/tags/mq/" style="font-size: 10.91px;">mq</a> <a href="/tags/mqtt/" style="font-size: 10px;">mqtt</a> <a href="/tags/mvc/" style="font-size: 10.91px;">mvc</a> <a href="/tags/mybatis/" style="font-size: 16.36px;">mybatis</a> <a href="/tags/mysal/" style="font-size: 10px;">mysal</a> <a href="/tags/mysql/" style="font-size: 12.73px;">mysql</a> <a href="/tags/mytabis/" style="font-size: 10px;">mytabis</a> <a href="/tags/netty/" style="font-size: 10.91px;">netty</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/opencv/" style="font-size: 10px;">opencv</a> <a href="/tags/pb/" style="font-size: 10px;">pb</a> <a href="/tags/php/" style="font-size: 11.82px;">php</a> <a href="/tags/protolbuf/" style="font-size: 10px;">protolbuf</a> <a href="/tags/push/" style="font-size: 10.91px;">push</a> <a href="/tags/quartz/" style="font-size: 11.82px;">quartz</a> <a href="/tags/redis/" style="font-size: 12.73px;">redis</a> <a href="/tags/rome/" style="font-size: 10.91px;">rome</a> <a href="/tags/schedule/" style="font-size: 10px;">schedule</a> <a href="/tags/search/" style="font-size: 10px;">search</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/servlet/" style="font-size: 10.91px;">servlet</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/sms/" style="font-size: 10px;">sms</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/spirng/" style="font-size: 10px;">spirng</a> <a href="/tags/spring/" style="font-size: 15.45px;">spring</a> <a href="/tags/spring-security/" style="font-size: 10px;">spring security</a> <a href="/tags/springboot/" style="font-size: 17.27px;">springboot</a> <a href="/tags/springcache/" style="font-size: 10px;">springcache</a> <a href="/tags/springmvc/" style="font-size: 13.64px;">springmvc</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/threads/" style="font-size: 10px;">threads</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/travel/" style="font-size: 10px;">travel</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/web/" style="font-size: 10.91px;">web</a> <a href="/tags/yii2/" style="font-size: 10.91px;">yii2</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/事务/" style="font-size: 10px;">事务</a> <a href="/tags/分布式/" style="font-size: 10.91px;">分布式</a> <a href="/tags/分布式事务/" style="font-size: 10px;">分布式事务</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/协调/" style="font-size: 10px;">协调</a> <a href="/tags/大数据/" style="font-size: 10px;">大数据</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/定时任务/" style="font-size: 13.64px;">定时任务</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/性能/" style="font-size: 10px;">性能</a> <a href="/tags/性能优化，O2O/" style="font-size: 10px;">性能优化，O2O</a> <a href="/tags/性能，架构/" style="font-size: 10px;">性能，架构</a> <a href="/tags/推荐/" style="font-size: 10px;">推荐</a> <a href="/tags/推送/" style="font-size: 10px;">推送</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/支付/" style="font-size: 10px;">支付</a> <a href="/tags/支付宝/" style="font-size: 10px;">支付宝</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/服务化/" style="font-size: 10.91px;">服务化</a> <a href="/tags/架构/" style="font-size: 19.09px;">架构</a> <a href="/tags/消息/" style="font-size: 10.91px;">消息</a> <a href="/tags/短信/" style="font-size: 10px;">短信</a> <a href="/tags/队列/" style="font-size: 10.91px;">队列</a>
    </div>
  </div>

  
    <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1032111474&verifier=90bc37f2&dpc=1"></iframe>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/04/nginx日志分析/">线上ngnix日志分析</a>
          </li>
        
          <li>
            <a href="/2016/10/28/性能优化之O2O/">性能优化之O2O大法</a>
          </li>
        
          <li>
            <a href="/2016/10/24/git最佳实践/">git最佳实践</a>
          </li>
        
          <li>
            <a href="/2016/10/24/文件安全/">web文件安全</a>
          </li>
        
          <li>
            <a href="/2016/10/20/mysql编码规范/">MySql编码规范</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">关于我</h3>
    <div class="widget">
      	<ul class="entry">
		<li><a href="mailto:niejinping2014@gmail.com" title="email">邮箱:niejinping2014@gmail.com</a></li>
		<li><a href="https://github.com/njkfei" title="github">github:https://github.com/njkfei</a></li>
	</ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>

  
    <div class="widget-wrap">
<h3 class="widget-title">友情链接</h3>
<div class="widget">
	<ul class="entry">
		<li><a href="http://www.58.com/" title="神奇的网站">神奇的网站:58同城</a></li>
		<li><a href="http://www.sanhao.com/" title="让教育回归家庭">让教育回归家庭:三好网</a></li>
	</ul>
</div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
<div class="outer">
    <div id="footer-info" class="inner" style="text-align:center;">
	  <table width="100%" border="0">
        <tr>
          <td style="text-align:left">
            Copyright &copy; 2014-2016 niejinping &nbsp; &nbsp;
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
	        Theme <a href="https://github.com/njk/landscape-njk" target="_blank">爱折腾</a> by 游骑爬 &nbsp; &nbsp;
	        Hosted on <a href="https://github.com/" target="_blank">GitHub</a>
		  </td>
		  <td style="text-align:right">
		    <div style="font-family: FontAwesome;font-size: 20px;">
		    <a href="http://weibo.com/1032111474" title="微博" target="_blank">&#61834;</a>&nbsp;
			<a href="http://user.qzone.qq.com/297206021" title="QQ空间" target="_blank">&#61910;</a>&nbsp;
			<a href="https://github.com/njkfei" title="GitHub" target="_blank">&#61595;</a>&nbsp;
			</div><br>
		    <a href="/sitemap.xml">网站地图</a>&nbsp; &nbsp;
			<a href="/atom.xml">订阅本站</a>&nbsp; &nbsp;
			<a href="mailto:297206021@qq.com" target="_blank">联系作者</a>&nbsp; &nbsp;
			ICP 备案中
		  </td>
        </tr>
      </table>
    </div>
</div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于我</a>
  
</nav>
    

<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=4804069604996030452' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/imgs/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>

<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>